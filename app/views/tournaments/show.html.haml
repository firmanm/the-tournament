%section
  %ol.breadcrumb
    %li
      =link_to 'Home', root_path
    %li
      %a(href="#") スポーツ
    %li
      %a(href="#") サッカー
    %li
      %a.active(href="#") 第14回全国高校サッカー選手権大会

%section
  %h1.title.clearfix
    =@tournament.title
    %small @#{@tournament.place}
    .btn-group.pull-right.btn-group-sm
      %button.btn.btn-primary(type="button") 編集
      %button.btn.btn-primary.dropdown-toggle(type="button" data-toggle="dropdown")
        %span.caret
      %ul.dropdown-menu(role="menu")
        %li=link_to sanitize('<i class="icon-cog"></i> ')+'基本情報の更新', edit_tournament_path
        %li=link_to sanitize('<i class="icon-user"></i> ')+'参加者情報の更新', tournament_players_path(@tournament)
        %li=link_to sanitize('<i class="icon-list-alt"></i> ')+'試合結果の更新', tournament_games_path(@tournament)

  %ul.list-inline
    %li
      %span.label.label-default サッカー
    %li
      %span.label.label-default 高校
    %li
      %span.label.label-default スポーツ
    %li
      %span.label.label-default 滋賀県
  %p
    =@tournament.desc


%section
  %h1.headline
    %i.icon.icon-trophy
    トーナメント表
  .clearfix
    #tournament.col-lg-12

%section
  %h1.headline
    %i.icon.icon-list-alt
    対戦表

  - @tournament.round_num.downto(1) do |i|
    - if i == @tournament.round_num
      .panel.panel-danger
        .panel-heading 決勝ラウンド
        %table.table
          - @tournament.games.where(round: i).each do |game|
            %tr
              %td
                - if game.match == 1
                  決勝
                - else
                  ３位決定戦
              - if game.game_records.present?
                %td.text-right
                  #{game.game_records.first.player.name}
                - if game.finished?
                  %td.text-right.text-danger
                    #{game.game_records.first.score}
                %td.text-center -
                - if game.finished?
                  %td.text-left.text-danger
                    #{game.game_records.last.score}
                %td.text-left
                  #{game.game_records.last.player.name}
              - else
                %td (TBD)
                %td -
                %td (TBD)
              %td.text-right 2014年3月2日 14:00

    - else
      .panel.panel-default
        .panel-heading #{i}回戦
        %table.table
          - @tournament.games.where(round: i).each do |game|
            %tr
              %td 第#{game.match}試合
              - if game.game_records.present?
                %td.text-right
                  #{game.game_records.first.player.name}
                - if game.finished?
                  %td.text-right.text-danger
                    #{game.game_records.first.score}
                %td.text-center -
                - if game.finished?
                  %td.text-left.text-danger
                    #{game.game_records.last.score}
                %td.text-left
                  #{game.game_records.last.player.name}
              - else
                %td (TBD)
                %td -
                %td (TBD)
              %td.text-right 2014年3月2日 14:00

%section
  %h1.headline
    %i.icon.icon-group
    メンバー表
  .panel.panel-default
    %table.table
      - @tournament.players.order(seed: :asc).each do |player|
        %tr
          %td= player.seed
          %td= player.name

