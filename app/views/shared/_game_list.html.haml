- tournament.round_num.downto(1) do |i|
  - panel = (i==tournament.round_num) ? "panel-warning" : "panel-default"
  .panel{class: panel}
    .panel-heading= tournament.round_name(i)
    %table#game-list.table.f16
      - tournament.games.where(round: i).each do |game|
        - unless (!tournament.consolation_round) && (i==tournament.round_num && game.match==2)
          %tr
            %td= game.match_name
            - if game.game_records.present?
              %td.text-right
                - if game.game_records.first.player.country.present?
                  - country = game.game_records.first.player.country.downcase
                  %span.flag{class: country}= game.game_records.first.player.name
                - else
                  #{game.game_records.first.player.name}
              %td.text-right.text-danger
                - if game.finished? && !game.bye
                  #{game.game_records.first.score}
              %td.text-center -
              %td.text-danger
                - if game.finished? && !game.bye
                  #{game.game_records.last.score}
              %td
                - if game.game_records.last.player.country.present?
                  - country = game.game_records.last.player.country.downcase
                  %span.flag{class: country}= game.game_records.last.player.name
                - else
                  #{game.game_records.last.player.name}
            - else
              %td.text-right (TBD)
              %td
              %td.text-center -
              %td
              %td (TBD)
            %td.text-right
              - if editable && game.game_records.present? && !game.bye
                = link_to t('Edit'), edit_game_path(game), class: 'btn btn-primary btn-sm pull-right'
